{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OUSSAMA CHAROUK\\\\Downloads\\\\FullStack_Ecommerce_App-main\\\\frontend\\\\src\\\\components\\\\PaymentStatus.js\",\n  _s = $RefreshSig$();\n// src/components/PaymentStatus.js\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PaymentStatus() {\n  _s();\n  const [s, setS] = useState(\"checking\");\n  const orderId = new URLSearchParams(window.location.search).get(\"order\") || localStorage.getItem(\"lastOrderId\");\n  useEffect(() => {\n    let ok = true;\n    if (!orderId) {\n      setS(\"unknown\");\n      return;\n    }\n    (async () => {\n      for (let i = 0; i < 6; i++) {\n        try {\n          const {\n            data\n          } = await axios.get(`/api/payments/order/${orderId}/status/`);\n          if (!ok) return;\n          if ([\"paid\", \"failed\", \"canceled\"].includes(data.status)) {\n            setS(data.status);\n            return;\n          }\n        } catch {\n          // ignore one-off errors\n        }\n        await new Promise(r => setTimeout(r, 1500));\n      }\n      setS(\"pending\");\n    })();\n    return () => {\n      ok = false;\n    };\n  }, [orderId]);\n  if (s === \"paid\") return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-success\",\n      children: \"Paiement confirm\\xE9 \\u2705\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 65\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 33\n  }, this);\n  if (s === \"failed\") return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: \"Paiement refus\\xE9 \\u274C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 65\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 33\n  }, this);\n  if (s === \"canceled\") return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-warning\",\n      children: \"Paiement annul\\xE9 \\u26A0\\uFE0F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 65\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 33\n  }, this);\n  if (s === \"pending\") return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-info\",\n      children: \"En attente de confirmation\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 65\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 33\n  }, this);\n  if (s === \"unknown\") return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-secondary\",\n      children: \"Commande introuvable\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 65\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 33\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-light\",\n      children: \"V\\xE9rification du paiement\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 63\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 31\n  }, this);\n}\n_s(PaymentStatus, \"wPVBu2zrfxs5J3+QhACdZmx6F94=\");\n_c = PaymentStatus;\nvar _c;\n$RefreshReg$(_c, \"PaymentStatus\");","map":{"version":3,"names":["useEffect","useState","axios","jsxDEV","_jsxDEV","PaymentStatus","_s","s","setS","orderId","URLSearchParams","window","location","search","get","localStorage","getItem","ok","i","data","includes","status","Promise","r","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/OUSSAMA CHAROUK/Downloads/FullStack_Ecommerce_App-main/frontend/src/components/PaymentStatus.js"],"sourcesContent":["// src/components/PaymentStatus.js\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function PaymentStatus() {\n  const [s, setS] = useState(\"checking\");\n\n  const orderId =\n    new URLSearchParams(window.location.search).get(\"order\") ||\n    localStorage.getItem(\"lastOrderId\");\n\n  useEffect(() => {\n    let ok = true;\n    if (!orderId) { setS(\"unknown\"); return; }\n\n    (async () => {\n      for (let i = 0; i < 6; i++) {\n        try {\n          const { data } = await axios.get(`/api/payments/order/${orderId}/status/`);\n          if (!ok) return;\n          if ([\"paid\", \"failed\", \"canceled\"].includes(data.status)) {\n            setS(data.status);\n            return;\n          }\n        } catch {\n          // ignore one-off errors\n        }\n        await new Promise(r => setTimeout(r, 1500));\n      }\n      setS(\"pending\");\n    })();\n\n    return () => { ok = false; };\n  }, [orderId]);\n\n  if (s === \"paid\")      return <div className=\"container py-5\"><div className=\"alert alert-success\">Paiement confirmé ✅</div></div>;\n  if (s === \"failed\")    return <div className=\"container py-5\"><div className=\"alert alert-danger\">Paiement refusé ❌</div></div>;\n  if (s === \"canceled\")  return <div className=\"container py-5\"><div className=\"alert alert-warning\">Paiement annulé ⚠️</div></div>;\n  if (s === \"pending\")   return <div className=\"container py-5\"><div className=\"alert alert-info\">En attente de confirmation…</div></div>;\n  if (s === \"unknown\")   return <div className=\"container py-5\"><div className=\"alert alert-secondary\">Commande introuvable</div></div>;\n  return                      <div className=\"container py-5\"><div className=\"alert alert-light\">Vérification du paiement…</div></div>;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}