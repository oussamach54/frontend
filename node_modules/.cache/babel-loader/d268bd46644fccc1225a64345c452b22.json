{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OUSSAMA CHAROUK\\\\Downloads\\\\FullStack_Ecommerce_App-main\\\\frontend\\\\src\\\\pages\\\\CheckoutPage.js\",\n  _s = $RefreshSig$();\n// src/pages/CheckoutPage.js\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\"; // on le garde juste pour charger les tarifs publics\nimport { Alert } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { useCart } from \"../cart/CartProvider\";\nimport { SHOP } from \"../config/shop\";\nimport \"./checkout.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FALLBACK_RATES = [{\n  city: \"Casablanca\",\n  price: 20\n}, {\n  city: \"Ain Harouda\",\n  price: 30\n}, {\n  city: \"Bouskoura\",\n  price: 30\n}, {\n  city: \"Dar Bouazza\",\n  price: 30\n}, {\n  city: \"Errahma ville\",\n  price: 30\n}, {\n  city: \"Tamaris\",\n  price: 30\n}, {\n  city: \"Tit Mellil\",\n  price: 30\n}, {\n  city: \"Agadir\",\n  price: 35\n}, {\n  city: \"Ait Melloul\",\n  price: 35\n}, {\n  city: \"Berrechid\",\n  price: 35\n}, {\n  city: \"Marrakech : Tamansourt\",\n  price: 45\n}, {\n  city: \"Mohammedia : Mimosa\",\n  price: 45\n}, {\n  city: \"Livraison pour toutes les autres villes\",\n  price: 45\n}];\nexport default function CheckoutPage() {\n  _s();\n  const {\n    items,\n    totals\n  } = useCart();\n\n  // contact + adresse\n  const [email, setEmail] = useState(\"\");\n  const [first, setFirst] = useState(\"\");\n  const [last, setLast] = useState(\"\");\n  const [addr, setAddr] = useState(\"\");\n  const [apt, setApt] = useState(\"\");\n  const [zip, setZip] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n\n  // exp√©dition\n  const [rates, setRates] = useState(FALLBACK_RATES);\n  const [shippingPrice, setShippingPrice] = useState(0);\n\n  // ui\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n\n  // Charger les tarifs publics si ton endpoint existe\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      try {\n        const {\n          data\n        } = await axios.get(\"/api/shipping-rates/\");\n        if (!alive) return;\n        if (Array.isArray(data) && data.length) {\n          const normalized = data.filter(r => r.active !== false).map(r => ({\n            city: r.city,\n            price: Number(r.price)\n          })).sort((a, b) => a.city.localeCompare(b.city, \"fr\"));\n          setRates(normalized);\n        }\n      } catch {\n        // fallback ok\n      }\n    })();\n    return () => {\n      alive = false;\n    };\n  }, []);\n\n  // Pr√©-s√©lection\n  useEffect(() => {\n    if (!rates.length) return;\n    const def = rates.find(r => r.city === \"Casablanca\") || rates[0];\n    setCity(def.city);\n    setShippingPrice(Number(def.price));\n  }, [rates]);\n  const total = useMemo(() => (Number(totals.subtotal) || 0) + Number(shippingPrice || 0), [totals.subtotal, shippingPrice]);\n\n  /** Construit l'URL wa.me avec un message complet */\n  const buildWhatsAppUrl = () => {\n    const lines = [];\n    lines.push(`*${SHOP.BRAND}* ‚Äì Nouvelle commande`);\n    lines.push(\"\");\n    lines.push(\"*Articles :*\");\n    items.forEach(it => {\n      const q = Number(it.qty || 1);\n      const p = Number(it.price).toFixed(2);\n      lines.push(`‚Ä¢ ${it.name}${it.variantLabel ? \" (\" + it.variantLabel + \")\" : \"\"} ‚Äî ${p} MAD √ó ${q}`);\n    });\n    lines.push(\"\");\n    const ss = Number(totals.subtotal || 0).toFixed(2);\n    const sp = Number(shippingPrice || 0).toFixed(2);\n    const tt = Number(total).toFixed(2);\n    lines.push(`Sous-total : ${ss} MAD`);\n    lines.push(`Livraison : ${sp} MAD`);\n    lines.push(`*Total : ${tt} MAD*`);\n    lines.push(\"\");\n    lines.push(\"*Coordonn√©es :*\");\n    if (email) lines.push(`Email : ${email}`);\n    lines.push(`Nom : ${(first || \"\").trim()} ${(last || \"\").trim()}`.trim());\n    lines.push(`T√©l√©phone : ${phone || \"-\"}`);\n    lines.push(`Adresse : ${addr}${apt ? \", \" + apt : \"\"}${zip ? \", \" + zip : \"\"}${city ? \" ‚Äì \" + city : \"\"}`.trim());\n    lines.push(\"\");\n    lines.push(\"Merci de confirmer ma commande üôè\");\n    const msg = encodeURIComponent(lines.join(\"\\n\"));\n    return `https://wa.me/${SHOP.WHATSAPP}?text=${msg}`;\n  };\n  const submit = () => {\n    setErr(\"\");\n    if (!items.length) {\n      setErr(\"Votre panier est vide.\");\n      return;\n    }\n    if (!addr || !city || !phone) {\n      setErr(\"Adresse, ville et t√©l√©phone sont obligatoires.\");\n      return;\n    }\n    setLoading(true);\n    // Redirection WhatsApp\n    window.location.href = buildWhatsAppUrl();\n    // pas de setLoading(false) : on quitte la page\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"co-wrap\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"co-left\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"co-title\",\n        children: \"Contact\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"co-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"E-mail ou num\\xE9ro de portable\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"co-title\",\n        children: \"Livraison\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"co-grid-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Pr\\xE9nom (optionnel)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: first,\n            onChange: e => setFirst(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nom\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: last,\n            onChange: e => setLast(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"co-field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Adresse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: addr,\n          onChange: e => setAddr(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"co-grid-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Appartement, suite, etc. (optionnel)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: apt,\n            onChange: e => setApt(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Ville\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: city,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"co-grid-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Code postal (facultatif)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: zip,\n            onChange: e => setZip(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-field\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"T\\xE9l\\xE9phone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            value: phone,\n            onChange: e => setPhone(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"co-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-block-title\",\n          children: \"Mode d\\u2019exp\\xE9dition\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-ship-list\",\n          children: rates.map(r => {\n            const checked = r.city === city;\n            return /*#__PURE__*/_jsxDEV(\"label\", {\n              className: `co-ship-row ${checked ? \"is-active\" : \"\"}`,\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                name: \"ship\",\n                checked: checked,\n                onChange: () => {\n                  setCity(r.city);\n                  setShippingPrice(Number(r.price));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"co-ship-city\",\n                children: r.city\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"co-ship-price\",\n                children: [Number(r.price).toFixed(2), \" MAD\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this)]\n            }, r.city, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"co-block\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-block-title\",\n          children: \"Paiement\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-pay-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            checked: true,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"co-pay-title\",\n              children: \"Paiement \\xE0 la livraison\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"co-pay-help\",\n              children: \"Paiement \\xE0 la livraison disponible dans toutes les villes du Maroc. Pas besoin de payer en ligne. La confirmation se fait sur WhatsApp.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), err && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        className: \"mt-2\",\n        children: err\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"co-submit\",\n        onClick: submit,\n        disabled: loading,\n        children: loading ? \"Redirection vers WhatsApp‚Ä¶\" : \"Valider le paiement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"co-right\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"co-summary\",\n        children: items.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"co-empty\",\n          children: \"Votre panier est vide.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"co-items\",\n            children: items.map(i => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"co-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: i.image,\n                alt: i.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"co-item-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"co-item-name\",\n                  children: i.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 23\n                }, this), i.variantLabel && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"co-item-variant\",\n                  children: i.variantLabel\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 42\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"co-item-qty\",\n                  children: [\"\\xD7 \", i.qty || 1]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"co-item-price\",\n                children: [(Number(i.price) * Number(i.qty || 1)).toFixed(2), \" MAD\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 21\n              }, this)]\n            }, i.key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"co-line\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Sous-total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [Number(totals.subtotal || 0).toFixed(2), \" MAD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"co-line\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Exp\\xE9dition\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [Number(shippingPrice).toFixed(2), \" MAD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"co-total\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Total\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [Number(total).toFixed(2), \" MAD\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n}\n_s(CheckoutPage, \"Dk7W3vkxyri/bMnqbSrLzBlLFno=\", false, function () {\n  return [useCart];\n});\n_c = CheckoutPage;\nvar _c;\n$RefreshReg$(_c, \"CheckoutPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","axios","Alert","Link","useCart","SHOP","jsxDEV","_jsxDEV","Fragment","_Fragment","FALLBACK_RATES","city","price","CheckoutPage","_s","items","totals","email","setEmail","first","setFirst","last","setLast","addr","setAddr","apt","setApt","zip","setZip","setCity","phone","setPhone","rates","setRates","shippingPrice","setShippingPrice","loading","setLoading","err","setErr","alive","data","get","Array","isArray","length","normalized","filter","r","active","map","Number","sort","a","b","localeCompare","def","find","total","subtotal","buildWhatsAppUrl","lines","push","BRAND","forEach","it","q","qty","p","toFixed","name","variantLabel","ss","sp","tt","trim","msg","encodeURIComponent","join","WHATSAPP","submit","window","location","href","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","readOnly","checked","type","variant","onClick","disabled","i","src","image","alt","key","_c","$RefreshReg$"],"sources":["C:/Users/OUSSAMA CHAROUK/Downloads/FullStack_Ecommerce_App-main/frontend/src/pages/CheckoutPage.js"],"sourcesContent":["// src/pages/CheckoutPage.js\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\"; // on le garde juste pour charger les tarifs publics\nimport { Alert } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { useCart } from \"../cart/CartProvider\";\nimport { SHOP } from \"../config/shop\";\nimport \"./checkout.css\";\n\nconst FALLBACK_RATES = [\n  { city: \"Casablanca\", price: 20 },\n  { city: \"Ain Harouda\", price: 30 },\n  { city: \"Bouskoura\", price: 30 },\n  { city: \"Dar Bouazza\", price: 30 },\n  { city: \"Errahma ville\", price: 30 },\n  { city: \"Tamaris\", price: 30 },\n  { city: \"Tit Mellil\", price: 30 },\n  { city: \"Agadir\", price: 35 },\n  { city: \"Ait Melloul\", price: 35 },\n  { city: \"Berrechid\", price: 35 },\n  { city: \"Marrakech : Tamansourt\", price: 45 },\n  { city: \"Mohammedia : Mimosa\", price: 45 },\n  { city: \"Livraison pour toutes les autres villes\", price: 45 },\n];\n\nexport default function CheckoutPage() {\n  const { items, totals } = useCart();\n\n  // contact + adresse\n  const [email, setEmail]   = useState(\"\");\n  const [first, setFirst]   = useState(\"\");\n  const [last, setLast]     = useState(\"\");\n  const [addr, setAddr]     = useState(\"\");\n  const [apt, setApt]       = useState(\"\");\n  const [zip, setZip]       = useState(\"\");\n  const [city, setCity]     = useState(\"\");\n  const [phone, setPhone]   = useState(\"\");\n\n  // exp√©dition\n  const [rates, setRates] = useState(FALLBACK_RATES);\n  const [shippingPrice, setShippingPrice] = useState(0);\n\n  // ui\n  const [loading, setLoading] = useState(false);\n  const [err, setErr] = useState(\"\");\n\n  // Charger les tarifs publics si ton endpoint existe\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      try {\n        const { data } = await axios.get(\"/api/shipping-rates/\");\n        if (!alive) return;\n        if (Array.isArray(data) && data.length) {\n          const normalized = data\n            .filter((r) => r.active !== false)\n            .map((r) => ({ city: r.city, price: Number(r.price) }))\n            .sort((a, b) => a.city.localeCompare(b.city, \"fr\"));\n          setRates(normalized);\n        }\n      } catch {\n        // fallback ok\n      }\n    })();\n    return () => { alive = false; };\n  }, []);\n\n  // Pr√©-s√©lection\n  useEffect(() => {\n    if (!rates.length) return;\n    const def = rates.find((r) => r.city === \"Casablanca\") || rates[0];\n    setCity(def.city);\n    setShippingPrice(Number(def.price));\n  }, [rates]);\n\n  const total = useMemo(\n    () => (Number(totals.subtotal) || 0) + Number(shippingPrice || 0),\n    [totals.subtotal, shippingPrice]\n  );\n\n  /** Construit l'URL wa.me avec un message complet */\n  const buildWhatsAppUrl = () => {\n    const lines = [];\n\n    lines.push(`*${SHOP.BRAND}* ‚Äì Nouvelle commande`);\n    lines.push(\"\");\n    lines.push(\"*Articles :*\");\n    items.forEach((it) => {\n      const q = Number(it.qty || 1);\n      const p = Number(it.price).toFixed(2);\n      lines.push(`‚Ä¢ ${it.name}${it.variantLabel ? \" (\" + it.variantLabel + \")\" : \"\"} ‚Äî ${p} MAD √ó ${q}`);\n    });\n    lines.push(\"\");\n\n    const ss = Number(totals.subtotal || 0).toFixed(2);\n    const sp = Number(shippingPrice || 0).toFixed(2);\n    const tt = Number(total).toFixed(2);\n\n    lines.push(`Sous-total : ${ss} MAD`);\n    lines.push(`Livraison : ${sp} MAD`);\n    lines.push(`*Total : ${tt} MAD*`);\n    lines.push(\"\");\n\n    lines.push(\"*Coordonn√©es :*\");\n    if (email) lines.push(`Email : ${email}`);\n    lines.push(`Nom : ${(first || \"\").trim()} ${(last || \"\").trim()}`.trim());\n    lines.push(`T√©l√©phone : ${phone || \"-\"}`);\n    lines.push(\n      `Adresse : ${addr}${apt ? \", \" + apt : \"\"}${zip ? \", \" + zip : \"\"}${\n        city ? \" ‚Äì \" + city : \"\"\n      }`.trim()\n    );\n    lines.push(\"\");\n    lines.push(\"Merci de confirmer ma commande üôè\");\n\n    const msg = encodeURIComponent(lines.join(\"\\n\"));\n    return `https://wa.me/${SHOP.WHATSAPP}?text=${msg}`;\n  };\n\n  const submit = () => {\n    setErr(\"\");\n    if (!items.length) {\n      setErr(\"Votre panier est vide.\");\n      return;\n    }\n    if (!addr || !city || !phone) {\n      setErr(\"Adresse, ville et t√©l√©phone sont obligatoires.\");\n      return;\n    }\n    setLoading(true);\n    // Redirection WhatsApp\n    window.location.href = buildWhatsAppUrl();\n    // pas de setLoading(false) : on quitte la page\n  };\n\n  return (\n    <div className=\"co-wrap\">\n      <div className=\"co-left\">\n        <h2 className=\"co-title\">Contact</h2>\n        <div className=\"co-field\">\n          <label>E-mail ou num√©ro de portable</label>\n          <input value={email} onChange={(e) => setEmail(e.target.value)} />\n        </div>\n\n        <h2 className=\"co-title\">Livraison</h2>\n        <div className=\"co-grid-2\">\n          <div className=\"co-field\">\n            <label>Pr√©nom (optionnel)</label>\n            <input value={first} onChange={(e) => setFirst(e.target.value)} />\n          </div>\n          <div className=\"co-field\">\n            <label>Nom</label>\n            <input value={last} onChange={(e) => setLast(e.target.value)} />\n          </div>\n        </div>\n\n        <div className=\"co-field\">\n          <label>Adresse</label>\n          <input value={addr} onChange={(e) => setAddr(e.target.value)} />\n        </div>\n\n        <div className=\"co-grid-2\">\n          <div className=\"co-field\">\n            <label>Appartement, suite, etc. (optionnel)</label>\n            <input value={apt} onChange={(e) => setApt(e.target.value)} />\n          </div>\n          <div className=\"co-field\">\n            <label>Ville</label>\n            <input value={city} readOnly />\n          </div>\n        </div>\n\n        <div className=\"co-grid-2\">\n          <div className=\"co-field\">\n            <label>Code postal (facultatif)</label>\n            <input value={zip} onChange={(e) => setZip(e.target.value)} />\n          </div>\n          <div className=\"co-field\">\n            <label>T√©l√©phone</label>\n            <input value={phone} onChange={(e) => setPhone(e.target.value)} />\n          </div>\n        </div>\n\n        <div className=\"co-block\">\n          <div className=\"co-block-title\">Mode d‚Äôexp√©dition</div>\n          <div className=\"co-ship-list\">\n            {rates.map((r) => {\n              const checked = r.city === city;\n              return (\n                <label key={r.city} className={`co-ship-row ${checked ? \"is-active\" : \"\"}`}>\n                  <input\n                    type=\"radio\"\n                    name=\"ship\"\n                    checked={checked}\n                    onChange={() => {\n                      setCity(r.city);\n                      setShippingPrice(Number(r.price));\n                    }}\n                  />\n                  <span className=\"co-ship-city\">{r.city}</span>\n                  <span className=\"co-ship-price\">{Number(r.price).toFixed(2)} MAD</span>\n                </label>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"co-block\">\n          <div className=\"co-block-title\">Paiement</div>\n          <div className=\"co-pay-row\">\n            <input type=\"radio\" checked readOnly />\n            <div>\n              <div className=\"co-pay-title\">Paiement √† la livraison</div>\n              <div className=\"co-pay-help\">\n                Paiement √† la livraison disponible dans toutes les villes du Maroc.\n                Pas besoin de payer en ligne. La confirmation se fait sur WhatsApp.\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {err && <Alert variant=\"danger\" className=\"mt-2\">{err}</Alert>}\n\n        <button className=\"co-submit\" onClick={submit} disabled={loading}>\n          {loading ? \"Redirection vers WhatsApp‚Ä¶\" : \"Valider le paiement\"}\n        </button>\n        \n      </div>\n\n      <aside className=\"co-right\">\n        <div className=\"co-summary\">\n          {items.length === 0 ? (\n            <div className=\"co-empty\">Votre panier est vide.</div>\n          ) : (\n            <>\n              <ul className=\"co-items\">\n                {items.map((i) => (\n                  <li key={i.key} className=\"co-item\">\n                    <img src={i.image} alt={i.name} />\n                    <div className=\"co-item-info\">\n                      <div className=\"co-item-name\">{i.name}</div>\n                      {i.variantLabel && <div className=\"co-item-variant\">{i.variantLabel}</div>}\n                      <div className=\"co-item-qty\">√ó {i.qty || 1}</div>\n                    </div>\n                    <div className=\"co-item-price\">\n                      {(Number(i.price) * Number(i.qty || 1)).toFixed(2)} MAD\n                    </div>\n                  </li>\n                ))}\n              </ul>\n\n              <div className=\"co-line\">\n                <span>Sous-total</span>\n                <b>{Number(totals.subtotal || 0).toFixed(2)} MAD</b>\n              </div>\n              <div className=\"co-line\">\n                <span>Exp√©dition</span>\n                <b>{Number(shippingPrice).toFixed(2)} MAD</b>\n              </div>\n              <div className=\"co-total\">\n                <span>Total</span>\n                <b>{Number(total).toFixed(2)} MAD</b>\n              </div>\n            </>\n          )}\n        </div>\n      </aside>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}