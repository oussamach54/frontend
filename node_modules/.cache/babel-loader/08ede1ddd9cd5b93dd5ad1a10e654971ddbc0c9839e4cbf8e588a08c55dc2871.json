{"ast":null,"code":"import axios from \"axios\";\nimport { WISHLIST_FETCH_REQUEST, WISHLIST_FETCH_SUCCESS, WISHLIST_FETCH_FAIL, WISHLIST_ADD_REQUEST, WISHLIST_ADD_SUCCESS, WISHLIST_ADD_FAIL, WISHLIST_REMOVE_REQUEST, WISHLIST_REMOVE_SUCCESS, WISHLIST_REMOVE_FAIL } from \"../constants/wishlistConstants\";\nconst authConfig = getState => {\n  const {\n    userLogin: {\n      userInfo\n    }\n  } = getState();\n  return {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: userInfo ? `Bearer ${userInfo.token}` : \"\"\n    }\n  };\n};\n\n// GET /api/wishlist -> [{ product fields… }]\nexport const fetchWishlist = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: WISHLIST_FETCH_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(\"/api/wishlist\", authConfig(getState));\n    dispatch({\n      type: WISHLIST_FETCH_SUCCESS,\n      payload: data\n    });\n    // Optionnel: persister local\n    localStorage.setItem(\"wishlist\", JSON.stringify(data));\n  } catch (e) {\n    var _e$response, _e$response$data;\n    dispatch({\n      type: WISHLIST_FETCH_FAIL,\n      payload: (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || e.message\n    });\n  }\n};\n\n// POST /api/wishlist/:productId -> retourne l’item ajouté (ou la liste)\nexport const addToWishlist = productId => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: WISHLIST_ADD_REQUEST\n    });\n    const {\n      data\n    } = await axios.post(`/api/wishlist/${productId}`, {}, authConfig(getState));\n    // data peut être l’item ou la liste; on normalize si c’est liste\n    if (Array.isArray(data)) {\n      dispatch({\n        type: WISHLIST_FETCH_SUCCESS,\n        payload: data\n      });\n      localStorage.setItem(\"wishlist\", JSON.stringify(data));\n    } else {\n      dispatch({\n        type: WISHLIST_ADD_SUCCESS,\n        payload: data\n      });\n      const next = [...getState().wishlist.items];\n      localStorage.setItem(\"wishlist\", JSON.stringify(next));\n    }\n  } catch (e) {\n    var _e$response2, _e$response2$data;\n    dispatch({\n      type: WISHLIST_ADD_FAIL,\n      payload: (e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || e.message\n    });\n  }\n};\n\n// DELETE /api/wishlist/:productId\nexport const removeFromWishlist = productId => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: WISHLIST_REMOVE_REQUEST\n    });\n    await axios.delete(`/api/wishlist/${productId}`, authConfig(getState));\n    dispatch({\n      type: WISHLIST_REMOVE_SUCCESS,\n      payload: productId\n    });\n    const next = getState().wishlist.items.filter(p => p._id !== productId);\n    localStorage.setItem(\"wishlist\", JSON.stringify(next));\n  } catch (e) {\n    var _e$response3, _e$response3$data;\n    dispatch({\n      type: WISHLIST_REMOVE_FAIL,\n      payload: (e === null || e === void 0 ? void 0 : (_e$response3 = e.response) === null || _e$response3 === void 0 ? void 0 : (_e$response3$data = _e$response3.data) === null || _e$response3$data === void 0 ? void 0 : _e$response3$data.message) || e.message\n    });\n  }\n};","map":{"version":3,"names":["axios","WISHLIST_FETCH_REQUEST","WISHLIST_FETCH_SUCCESS","WISHLIST_FETCH_FAIL","WISHLIST_ADD_REQUEST","WISHLIST_ADD_SUCCESS","WISHLIST_ADD_FAIL","WISHLIST_REMOVE_REQUEST","WISHLIST_REMOVE_SUCCESS","WISHLIST_REMOVE_FAIL","authConfig","getState","userLogin","userInfo","headers","Authorization","token","fetchWishlist","dispatch","type","data","get","payload","localStorage","setItem","JSON","stringify","e","_e$response","_e$response$data","response","message","addToWishlist","productId","post","Array","isArray","next","wishlist","items","_e$response2","_e$response2$data","removeFromWishlist","delete","filter","p","_id","_e$response3","_e$response3$data"],"sources":["C:/Users/OUSSAMA CHAROUK/Downloads/FullStack_Ecommerce_App-main/frontend/src/actions/wishlistActions.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  WISHLIST_FETCH_REQUEST, WISHLIST_FETCH_SUCCESS, WISHLIST_FETCH_FAIL,\r\n  WISHLIST_ADD_REQUEST,   WISHLIST_ADD_SUCCESS,   WISHLIST_ADD_FAIL,\r\n  WISHLIST_REMOVE_REQUEST,WISHLIST_REMOVE_SUCCESS,WISHLIST_REMOVE_FAIL,\r\n} from \"../constants/wishlistConstants\";\r\n\r\nconst authConfig = (getState) => {\r\n  const {\r\n    userLogin: { userInfo },\r\n  } = getState();\r\n  return {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: userInfo ? `Bearer ${userInfo.token}` : \"\",\r\n    },\r\n  };\r\n};\r\n\r\n// GET /api/wishlist -> [{ product fields… }]\r\nexport const fetchWishlist = () => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: WISHLIST_FETCH_REQUEST });\r\n    const { data } = await axios.get(\"/api/wishlist\", authConfig(getState));\r\n    dispatch({ type: WISHLIST_FETCH_SUCCESS, payload: data });\r\n    // Optionnel: persister local\r\n    localStorage.setItem(\"wishlist\", JSON.stringify(data));\r\n  } catch (e) {\r\n    dispatch({\r\n      type: WISHLIST_FETCH_FAIL,\r\n      payload: e?.response?.data?.message || e.message,\r\n    });\r\n  }\r\n};\r\n\r\n// POST /api/wishlist/:productId -> retourne l’item ajouté (ou la liste)\r\nexport const addToWishlist = (productId) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: WISHLIST_ADD_REQUEST });\r\n    const { data } = await axios.post(\r\n      `/api/wishlist/${productId}`,\r\n      {},\r\n      authConfig(getState)\r\n    );\r\n    // data peut être l’item ou la liste; on normalize si c’est liste\r\n    if (Array.isArray(data)) {\r\n      dispatch({ type: WISHLIST_FETCH_SUCCESS, payload: data });\r\n      localStorage.setItem(\"wishlist\", JSON.stringify(data));\r\n    } else {\r\n      dispatch({ type: WISHLIST_ADD_SUCCESS, payload: data });\r\n      const next = [...getState().wishlist.items];\r\n      localStorage.setItem(\"wishlist\", JSON.stringify(next));\r\n    }\r\n  } catch (e) {\r\n    dispatch({\r\n      type: WISHLIST_ADD_FAIL,\r\n      payload: e?.response?.data?.message || e.message,\r\n    });\r\n  }\r\n};\r\n\r\n// DELETE /api/wishlist/:productId\r\nexport const removeFromWishlist = (productId) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: WISHLIST_REMOVE_REQUEST });\r\n    await axios.delete(`/api/wishlist/${productId}`, authConfig(getState));\r\n    dispatch({ type: WISHLIST_REMOVE_SUCCESS, payload: productId });\r\n    const next = getState().wishlist.items.filter((p) => p._id !== productId);\r\n    localStorage.setItem(\"wishlist\", JSON.stringify(next));\r\n  } catch (e) {\r\n    dispatch({\r\n      type: WISHLIST_REMOVE_FAIL,\r\n      payload: e?.response?.data?.message || e.message,\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}