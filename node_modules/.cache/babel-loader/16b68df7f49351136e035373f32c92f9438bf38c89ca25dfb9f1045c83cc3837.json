{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OUSSAMA CHAROUK\\\\Downloads\\\\FullStack_Ecommerce_App-main\\\\frontend\\\\src\\\\pages\\\\ProductDetailsPage.js\",\n  _s = $RefreshSig$();\n// src/pages/ProductDetailsPage.js\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { Spinner, Row, Col, Container, Card, Button, Modal, Form, InputGroup } from 'react-bootstrap';\nimport { deleteProduct, getProductDetails } from '../actions/productActions';\nimport { toggleWishlist } from '../actions/wishlistActions';\nimport Message from '../components/Message';\nimport { CREATE_PRODUCT_RESET, DELETE_PRODUCT_RESET, UPDATE_PRODUCT_RESET, CARD_CREATE_RESET } from '../constants';\n\n// ====== CONFIG ======\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ADMIN_WHATSAPP = '212612345678'; // <<< put your admin WhatsApp number here (no +)\n// ====================\n\nconst fmtMAD = n => new Intl.NumberFormat('fr-MA', {\n  style: 'currency',\n  currency: 'MAD'\n}).format(Number(n || 0));\nfunction ProductDetailsPage({\n  history,\n  match\n}) {\n  _s();\n  const dispatch = useDispatch();\n\n  // ====== MODALS ======\n  const [showDelete, setShowDelete] = useState(false);\n  const [showOrder, setShowOrder] = useState(false); // NEW: order modal\n\n  // ====== PRODUCT ======\n  const {\n    loading,\n    error,\n    product\n  } = useSelector(s => s.productDetailsReducer);\n  const {\n    userInfo\n  } = useSelector(s => s.userLoginReducer);\n  const {\n    success: productDeletionSuccess\n  } = useSelector(s => s.deleteProductReducer);\n\n  // ====== WISHLIST ======\n  const {\n    items: wishlistItems = []\n  } = useSelector(s => s.wishlist || {});\n  const pid = product === null || product === void 0 ? void 0 : product.id;\n  const inWishlist = pid ? wishlistItems.some(w => (w.id || w._id) === pid) : false;\n  const handleToggleWishlist = () => pid && dispatch(toggleWishlist(pid));\n\n  // ====== QUANTITY (NEW) ======\n  const [qty, setQty] = useState(1);\n  const minus = () => setQty(q => Math.max(1, q - 1));\n  const plus = () => setQty(q => Math.min(99, q + 1));\n  const total = useMemo(() => product !== null && product !== void 0 && product.price ? qty * Number(product.price) : 0, [qty, product]);\n\n  // ====== ORDER FORM (NEW) ======\n  const [order, setOrder] = useState({\n    firstName: '',\n    lastName: '',\n    phone: '',\n    address: ''\n  });\n  const openOrder = () => setShowOrder(true);\n  const closeOrder = () => setShowOrder(false);\n  const submitOrder = e => {\n    e.preventDefault();\n    if (!product) return;\n    const lines = [`*Nouvelle commande* üßæ`, `Produit: ${product.name} (ID: ${product.id})`, `Quantit√©: ${qty}`, `Prix unitaire: ${fmtMAD(product.price)}`, `Total: *${fmtMAD(total)}*`, `‚Äî`, `Nom: ${order.firstName} ${order.lastName}`, `T√©l√©phone: ${order.phone}`, `Adresse: ${order.address}`];\n    const text = encodeURIComponent(lines.join('\\n'));\n    const url = `https://wa.me/${ADMIN_WHATSAPP}?text=${text}`;\n    window.open(url, '_blank'); // open WhatsApp\n    closeOrder();\n  };\n\n  // ====== LIFECYCLE ======\n  useEffect(() => {\n    dispatch(getProductDetails(match.params.id));\n    dispatch({\n      type: UPDATE_PRODUCT_RESET\n    });\n    dispatch({\n      type: CREATE_PRODUCT_RESET\n    });\n    dispatch({\n      type: CARD_CREATE_RESET\n    });\n  }, [dispatch, match]);\n  const confirmDelete = () => {\n    dispatch(deleteProduct(match.params.id));\n    setShowDelete(false);\n  };\n  if (productDeletionSuccess) {\n    alert('Product successfully deleted.');\n    history.push('/');\n    dispatch({\n      type: DELETE_PRODUCT_RESET\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      show: showDelete,\n      onHide: () => setShowDelete(false),\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            style: {\n              color: '#e6e600'\n            },\n            className: \"fas fa-exclamation-triangle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), ' ', \"Delete Confirmation\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [\"Are you sure you want to delete this product \", /*#__PURE__*/_jsxDEV(\"em\", {\n          children: [\"\\\"\", product === null || product === void 0 ? void 0 : product.name, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 56\n        }, this), \"?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: confirmDelete,\n          children: \"Confirm Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: () => setShowDelete(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showOrder,\n      onHide: closeOrder,\n      centered: true,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: submitOrder,\n        children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n          closeButton: true,\n          children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n            children: \"Commander maintenant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"small text-muted mb-3\",\n            children: [\"Produit: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: product === null || product === void 0 ? void 0 : product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 24\n            }, this), \" \\u2013 Quantit\\xE9: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: qty\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 59\n            }, this), \" \\u2013 Total:\", ' ', /*#__PURE__*/_jsxDEV(\"b\", {\n              children: fmtMAD(total)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"firstName\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Pr\\xE9nom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  required: true,\n                  value: order.firstName,\n                  onChange: e => setOrder(o => ({\n                    ...o,\n                    firstName: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"lastName\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Nom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  required: true,\n                  value: order.lastName,\n                  onChange: e => setOrder(o => ({\n                    ...o,\n                    lastName: e.target.value\n                  }))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"phone\",\n            className: \"mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"T\\xE9l\\xE9phone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              required: true,\n              type: \"tel\",\n              placeholder: \"06 xx xx xx xx\",\n              value: order.phone,\n              onChange: e => setOrder(o => ({\n                ...o,\n                phone: e.target.value\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"address\",\n            className: \"mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Localisation / Adresse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              required: true,\n              as: \"textarea\",\n              rows: 3,\n              placeholder: \"Votre adresse compl\\xE8te\",\n              value: order.address,\n              onChange: e => setOrder(o => ({\n                ...o,\n                address: e.target.value\n              }))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"secondary\",\n            onClick: closeOrder,\n            children: \"Annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"success\",\n            type: \"submit\",\n            children: \"Envoyer sur WhatsApp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        children: \"Getting Product Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {\n          animation: \"border\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 9\n    }, this), error ? /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(Card.Img, {\n            variant: \"top\",\n            src: product === null || product === void 0 ? void 0 : product.image,\n            height: \"420\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 15\n          }, this), userInfo && userInfo.admin ? /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              display: 'flex'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn mt-2 btn-danger btn-sm button-focus-css\",\n              style: {\n                width: '100%'\n              },\n              onClick: () => setShowDelete(true),\n              children: \"Delete Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"ml-2 mt-2 btn btn-primary btn-sm button-focus-css\",\n              onClick: () => history.push(`/product-update/${product.id}/`),\n              style: {\n                width: '100%'\n              },\n              children: \"Edit Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 17\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          sm: true,\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: product === null || product === void 0 ? void 0 : product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"justify-description-css\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product === null || product === void 0 ? void 0 : product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'center',\n              border: '1px solid',\n              borderColor: '#C6ACE7',\n              padding: '2px'\n            },\n            children: [\"Price:\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-success ml-2\",\n              children: fmtMAD(product === null || product === void 0 ? void 0 : product.price)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              className: \"mb-1\",\n              children: \"Quantit\\xE9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n              style: {\n                maxWidth: 160\n              },\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"light\",\n                onClick: minus,\n                \"aria-label\": \"minus\",\n                children: \"\\u2212\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                className: \"text-center\",\n                value: qty,\n                onChange: e => {\n                  const v = Number(e.target.value);\n                  if (!Number.isNaN(v)) setQty(Math.max(1, Math.min(99, v)));\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"light\",\n                onClick: plus,\n                \"aria-label\": \"plus\",\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3\",\n            children: [product !== null && product !== void 0 && product.stock ? /*#__PURE__*/_jsxDEV(Link, {\n              to: `${product.id}/checkout/`,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-primary\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Pay with Stripe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Message, {\n              variant: \"danger\",\n              children: \"Out Of Stock!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"success\",\n              className: \"ml-2\",\n              onClick: openOrder,\n              \"aria-label\": \"Commander maintenant\",\n              children: \"Commander maintenant\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleToggleWishlist,\n            variant: \"outline-secondary\",\n            className: \"mt-3\",\n            style: {\n              borderRadius: 10\n            },\n            \"aria-label\": inWishlist ? 'Retirer de la wishlist' : 'Ajouter √† la wishlist',\n            children: inWishlist ? 'üíî Retirer de ma wishlist' : 'ü§ç Ajouter √† ma wishlist'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 text-muted\",\n            children: [\"Total estim\\xE9: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: fmtMAD(total)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductDetailsPage, \"HwVRjV1x6ol1QDUPUKY9/i4uCX0=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useSelector];\n});\n_c = ProductDetailsPage;\nexport default ProductDetailsPage;\nvar _c;\n$RefreshReg$(_c, \"ProductDetailsPage\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useDispatch","useSelector","Link","Spinner","Row","Col","Container","Card","Button","Modal","Form","InputGroup","deleteProduct","getProductDetails","toggleWishlist","Message","CREATE_PRODUCT_RESET","DELETE_PRODUCT_RESET","UPDATE_PRODUCT_RESET","CARD_CREATE_RESET","jsxDEV","_jsxDEV","ADMIN_WHATSAPP","fmtMAD","n","Intl","NumberFormat","style","currency","format","Number","ProductDetailsPage","history","match","_s","dispatch","showDelete","setShowDelete","showOrder","setShowOrder","loading","error","product","s","productDetailsReducer","userInfo","userLoginReducer","success","productDeletionSuccess","deleteProductReducer","items","wishlistItems","wishlist","pid","id","inWishlist","some","w","_id","handleToggleWishlist","qty","setQty","minus","q","Math","max","plus","min","total","price","order","setOrder","firstName","lastName","phone","address","openOrder","closeOrder","submitOrder","e","preventDefault","lines","name","text","encodeURIComponent","join","url","window","open","params","type","confirmDelete","alert","push","children","show","onHide","Header","closeButton","Title","color","className","fileName","_jsxFileName","lineNumber","columnNumber","Body","Footer","variant","onClick","centered","onSubmit","md","Group","controlId","Label","Control","required","value","onChange","o","target","placeholder","as","rows","display","animation","Img","src","image","height","admin","width","sm","description","justifyContent","border","borderColor","padding","maxWidth","v","isNaN","stock","to","borderRadius","_c","$RefreshReg$"],"sources":["C:/Users/OUSSAMA CHAROUK/Downloads/FullStack_Ecommerce_App-main/frontend/src/pages/ProductDetailsPage.js"],"sourcesContent":["// src/pages/ProductDetailsPage.js\nimport React, { useEffect, useState, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport {\n  Spinner,\n  Row,\n  Col,\n  Container,\n  Card,\n  Button,\n  Modal,\n  Form,\n  InputGroup,\n} from 'react-bootstrap';\n\nimport { deleteProduct, getProductDetails } from '../actions/productActions';\nimport { toggleWishlist } from '../actions/wishlistActions';\nimport Message from '../components/Message';\n\nimport {\n  CREATE_PRODUCT_RESET,\n  DELETE_PRODUCT_RESET,\n  UPDATE_PRODUCT_RESET,\n  CARD_CREATE_RESET,\n} from '../constants';\n\n// ====== CONFIG ======\nconst ADMIN_WHATSAPP = '212612345678'; // <<< put your admin WhatsApp number here (no +)\n// ====================\n\nconst fmtMAD = (n) =>\n  new Intl.NumberFormat('fr-MA', { style: 'currency', currency: 'MAD' }).format(\n    Number(n || 0)\n  );\n\nfunction ProductDetailsPage({ history, match }) {\n  const dispatch = useDispatch();\n\n  // ====== MODALS ======\n  const [showDelete, setShowDelete] = useState(false);\n  const [showOrder, setShowOrder] = useState(false); // NEW: order modal\n\n  // ====== PRODUCT ======\n  const { loading, error, product } = useSelector((s) => s.productDetailsReducer);\n  const { userInfo } = useSelector((s) => s.userLoginReducer);\n  const { success: productDeletionSuccess } = useSelector(\n    (s) => s.deleteProductReducer\n  );\n\n  // ====== WISHLIST ======\n  const { items: wishlistItems = [] } = useSelector((s) => s.wishlist || {});\n  const pid = product?.id;\n  const inWishlist = pid ? wishlistItems.some((w) => (w.id || w._id) === pid) : false;\n  const handleToggleWishlist = () => pid && dispatch(toggleWishlist(pid));\n\n  // ====== QUANTITY (NEW) ======\n  const [qty, setQty] = useState(1);\n  const minus = () => setQty((q) => Math.max(1, q - 1));\n  const plus = () => setQty((q) => Math.min(99, q + 1));\n  const total = useMemo(() => (product?.price ? qty * Number(product.price) : 0), [\n    qty,\n    product,\n  ]);\n\n  // ====== ORDER FORM (NEW) ======\n  const [order, setOrder] = useState({\n    firstName: '',\n    lastName: '',\n    phone: '',\n    address: '',\n  });\n\n  const openOrder = () => setShowOrder(true);\n  const closeOrder = () => setShowOrder(false);\n\n  const submitOrder = (e) => {\n    e.preventDefault();\n    if (!product) return;\n\n    const lines = [\n      `*Nouvelle commande* üßæ`,\n      `Produit: ${product.name} (ID: ${product.id})`,\n      `Quantit√©: ${qty}`,\n      `Prix unitaire: ${fmtMAD(product.price)}`,\n      `Total: *${fmtMAD(total)}*`,\n      `‚Äî`,\n      `Nom: ${order.firstName} ${order.lastName}`,\n      `T√©l√©phone: ${order.phone}`,\n      `Adresse: ${order.address}`,\n    ];\n\n    const text = encodeURIComponent(lines.join('\\n'));\n    const url = `https://wa.me/${ADMIN_WHATSAPP}?text=${text}`;\n    window.open(url, '_blank'); // open WhatsApp\n    closeOrder();\n  };\n\n  // ====== LIFECYCLE ======\n  useEffect(() => {\n    dispatch(getProductDetails(match.params.id));\n    dispatch({ type: UPDATE_PRODUCT_RESET });\n    dispatch({ type: CREATE_PRODUCT_RESET });\n    dispatch({ type: CARD_CREATE_RESET });\n  }, [dispatch, match]);\n\n  const confirmDelete = () => {\n    dispatch(deleteProduct(match.params.id));\n    setShowDelete(false);\n  };\n\n  if (productDeletionSuccess) {\n    alert('Product successfully deleted.');\n    history.push('/');\n    dispatch({ type: DELETE_PRODUCT_RESET });\n  }\n\n  return (\n    <div>\n      {/* ===== Delete Modal ===== */}\n      <Modal show={showDelete} onHide={() => setShowDelete(false)}>\n        <Modal.Header closeButton>\n          <Modal.Title>\n            <i style={{ color: '#e6e600' }} className=\"fas fa-exclamation-triangle\" />{' '}\n            Delete Confirmation\n          </Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          Are you sure you want to delete this product <em>\"{product?.name}\"</em>?\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"danger\" onClick={confirmDelete}>\n            Confirm Delete\n          </Button>\n          <Button variant=\"primary\" onClick={() => setShowDelete(false)}>\n            Cancel\n          </Button>\n        </Modal.Footer>\n      </Modal>\n\n      {/* ===== Order Modal (NEW) ===== */}\n      <Modal show={showOrder} onHide={closeOrder} centered>\n        <Form onSubmit={submitOrder}>\n          <Modal.Header closeButton>\n            <Modal.Title>Commander maintenant</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <p className=\"small text-muted mb-3\">\n              Produit: <b>{product?.name}</b> ‚Äì Quantit√©: <b>{qty}</b> ‚Äì Total:{' '}\n              <b>{fmtMAD(total)}</b>\n            </p>\n\n            <Row>\n              <Col md={6}>\n                <Form.Group controlId=\"firstName\">\n                  <Form.Label>Pr√©nom</Form.Label>\n                  <Form.Control\n                    required\n                    value={order.firstName}\n                    onChange={(e) =>\n                      setOrder((o) => ({ ...o, firstName: e.target.value }))\n                    }\n                  />\n                </Form.Group>\n              </Col>\n              <Col md={6}>\n                <Form.Group controlId=\"lastName\">\n                  <Form.Label>Nom</Form.Label>\n                  <Form.Control\n                    required\n                    value={order.lastName}\n                    onChange={(e) =>\n                      setOrder((o) => ({ ...o, lastName: e.target.value }))\n                    }\n                  />\n                </Form.Group>\n              </Col>\n            </Row>\n\n            <Form.Group controlId=\"phone\" className=\"mt-3\">\n              <Form.Label>T√©l√©phone</Form.Label>\n              <Form.Control\n                required\n                type=\"tel\"\n                placeholder=\"06 xx xx xx xx\"\n                value={order.phone}\n                onChange={(e) =>\n                  setOrder((o) => ({ ...o, phone: e.target.value }))\n                }\n              />\n            </Form.Group>\n\n            <Form.Group controlId=\"address\" className=\"mt-3\">\n              <Form.Label>Localisation / Adresse</Form.Label>\n              <Form.Control\n                required\n                as=\"textarea\"\n                rows={3}\n                placeholder=\"Votre adresse compl√®te\"\n                value={order.address}\n                onChange={(e) =>\n                  setOrder((o) => ({ ...o, address: e.target.value }))\n                }\n              />\n            </Form.Group>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button variant=\"secondary\" onClick={closeOrder}>\n              Annuler\n            </Button>\n            <Button variant=\"success\" type=\"submit\">\n              Envoyer sur WhatsApp\n            </Button>\n          </Modal.Footer>\n        </Form>\n      </Modal>\n\n      {/* ===== Main content ===== */}\n      {loading && (\n        <span style={{ display: 'flex' }}>\n          <h5>Getting Product Details</h5>\n          <span className=\"ml-2\">\n            <Spinner animation=\"border\" />\n          </span>\n        </span>\n      )}\n\n      {error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <Container>\n          <Row>\n            <Col md={6}>\n              <Card.Img variant=\"top\" src={product?.image} height=\"420\" />\n\n              {/* Admin actions */}\n              {userInfo && userInfo.admin ? (\n                <span style={{ display: 'flex' }}>\n                  <button\n                    className=\"btn mt-2 btn-danger btn-sm button-focus-css\"\n                    style={{ width: '100%' }}\n                    onClick={() => setShowDelete(true)}\n                  >\n                    Delete Product\n                  </button>\n\n                  <button\n                    className=\"ml-2 mt-2 btn btn-primary btn-sm button-focus-css\"\n                    onClick={() => history.push(`/product-update/${product.id}/`)}\n                    style={{ width: '100%' }}\n                  >\n                    Edit Product\n                  </button>\n                </span>\n              ) : null}\n            </Col>\n\n            <Col sm>\n              <b>{product?.name}</b>\n              <hr />\n              <span className=\"justify-description-css\">\n                <p>{product?.description}</p>\n              </span>\n\n              <div\n                style={{\n                  display: 'flex',\n                  justifyContent: 'center',\n                  border: '1px solid',\n                  borderColor: '#C6ACE7',\n                  padding: '2px',\n                }}\n              >\n                Price:\n                <span className=\"text-success ml-2\">\n                  {fmtMAD(product?.price)}\n                </span>\n              </div>\n\n              {/* NEW: Quantity selector */}\n              <div className=\"mt-3\">\n                <Form.Label className=\"mb-1\">Quantit√©</Form.Label>\n                <InputGroup style={{ maxWidth: 160 }}>\n                  <Button variant=\"light\" onClick={minus} aria-label=\"minus\">\n                    &minus;\n                  </Button>\n                  <Form.Control\n                    className=\"text-center\"\n                    value={qty}\n                    onChange={(e) => {\n                      const v = Number(e.target.value);\n                      if (!Number.isNaN(v)) setQty(Math.max(1, Math.min(99, v)));\n                    }}\n                  />\n                  <Button variant=\"light\" onClick={plus} aria-label=\"plus\">\n                    +\n                  </Button>\n                </InputGroup>\n              </div>\n\n              {/* Buy / WhatsApp order */}\n              <div className=\"mt-3\">\n                {product?.stock ? (\n                  <Link to={`${product.id}/checkout/`}>\n                    <button className=\"btn btn-primary\">\n                      <span>Pay with Stripe</span>\n                    </button>\n                  </Link>\n                ) : (\n                  <Message variant=\"danger\">Out Of Stock!</Message>\n                )}\n\n                {/* NEW: Commander maintenant */}\n                <Button\n                  variant=\"success\"\n                  className=\"ml-2\"\n                  onClick={openOrder}\n                  aria-label=\"Commander maintenant\"\n                >\n                  Commander maintenant\n                </Button>\n              </div>\n\n              {/* Wishlist */}\n              <Button\n                onClick={handleToggleWishlist}\n                variant=\"outline-secondary\"\n                className=\"mt-3\"\n                style={{ borderRadius: 10 }}\n                aria-label={inWishlist ? 'Retirer de la wishlist' : 'Ajouter √† la wishlist'}\n              >\n                {inWishlist ? 'üíî Retirer de ma wishlist' : 'ü§ç Ajouter √† ma wishlist'}\n              </Button>\n\n              {/* NEW: Total display */}\n              <div className=\"mt-2 text-muted\">\n                Total estim√©: <b>{fmtMAD(total)}</b>\n              </div>\n            </Col>\n          </Row>\n        </Container>\n      )}\n    </div>\n  );\n}\n\nexport default ProductDetailsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}