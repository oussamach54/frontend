{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OUSSAMA CHAROUK\\\\Downloads\\\\FullStack_Ecommerce_App-main\\\\frontend\\\\src\\\\pages\\\\BrandCollectionPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router-dom\";\nimport { fromSlug } from \"../utils/slug\";\nimport HomeProductCard from \"../components/HomeProductCard\";\nimport \"./brands.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function BrandCollectionPage() {\n  _s();\n  const {\n    slug\n  } = useParams();\n  const [brand, setBrand] = useState(\"\");\n  const [brands, setBrands] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  // load brand list once to decode slug → brand name with accents/case\n  useEffect(() => {\n    let ok = true;\n    (async () => {\n      try {\n        const {\n          data\n        } = await axios.get(\"/api/brands/\");\n        if (!ok) return;\n        const list = Array.isArray(data) ? data : [];\n        setBrands(list);\n        setBrand(fromSlug(slug, list));\n      } finally {\n        if (ok) setLoading(false);\n      }\n    })();\n    return () => {\n      ok = false;\n    };\n  }, [slug]);\n\n  // fetch products for that brand\n  useEffect(() => {\n    if (!brand) return;\n    let ok = true;\n    setLoading(true);\n    (async () => {\n      try {\n        const {\n          data\n        } = await axios.get(`/api/products/?brand=${encodeURIComponent(brand)}`);\n        if (ok) setProducts(Array.isArray(data) ? data : []);\n      } catch (e) {\n        var _e$response, _e$response$data;\n        if (ok) setError((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.detail) || e.message);\n      } finally {\n        if (ok) setLoading(false);\n      }\n    })();\n    return () => {\n      ok = false;\n    };\n  }, [brand]);\n  const title = useMemo(() => brand || \"Marque\", [brand]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bp-wrap\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"bp-title\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bp-empty\",\n      children: \"Chargement\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bp-error\",\n      children: [\"Erreur : \", error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this), !loading && !error && (products.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"hp-grid\",\n      children: products.map(p => /*#__PURE__*/_jsxDEV(HomeProductCard, {\n        product: p\n      }, p.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 34\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bp-empty\",\n      children: \"Aucun produit pour cette marque.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(BrandCollectionPage, \"9wsiUgDb7RbybqZHW7QFXMvGQ1w=\", false, function () {\n  return [useParams];\n});\n_c = BrandCollectionPage;\nvar _c;\n$RefreshReg$(_c, \"BrandCollectionPage\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","axios","useParams","fromSlug","HomeProductCard","jsxDEV","_jsxDEV","BrandCollectionPage","_s","slug","brand","setBrand","brands","setBrands","products","setProducts","loading","setLoading","error","setError","ok","data","get","list","Array","isArray","encodeURIComponent","e","_e$response","_e$response$data","response","detail","message","title","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","p","product","id","_c","$RefreshReg$"],"sources":["C:/Users/OUSSAMA CHAROUK/Downloads/FullStack_Ecommerce_App-main/frontend/src/pages/BrandCollectionPage.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { fromSlug } from \"../utils/slug\";\r\nimport HomeProductCard from \"../components/HomeProductCard\";\r\nimport \"./brands.css\";\r\n\r\nexport default function BrandCollectionPage() {\r\n  const { slug } = useParams();\r\n  const [brand, setBrand] = useState(\"\");\r\n  const [brands, setBrands] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading]   = useState(true);\r\n  const [error, setError]       = useState(\"\");\r\n\r\n  // load brand list once to decode slug → brand name with accents/case\r\n  useEffect(() => {\r\n    let ok = true;\r\n    (async () => {\r\n      try {\r\n        const { data } = await axios.get(\"/api/brands/\");\r\n        if (!ok) return;\r\n        const list = Array.isArray(data) ? data : [];\r\n        setBrands(list);\r\n        setBrand(fromSlug(slug, list));\r\n      } finally { if (ok) setLoading(false); }\r\n    })();\r\n    return () => { ok = false; };\r\n  }, [slug]);\r\n\r\n  // fetch products for that brand\r\n  useEffect(() => {\r\n    if (!brand) return;\r\n    let ok = true;\r\n    setLoading(true);\r\n    (async () => {\r\n      try {\r\n        const { data } = await axios.get(`/api/products/?brand=${encodeURIComponent(brand)}`);\r\n        if (ok) setProducts(Array.isArray(data) ? data : []);\r\n      } catch (e) {\r\n        if (ok) setError(e?.response?.data?.detail || e.message);\r\n      } finally { if (ok) setLoading(false); }\r\n    })();\r\n    return () => { ok = false; };\r\n  }, [brand]);\r\n\r\n  const title = useMemo(() => brand || \"Marque\", [brand]);\r\n\r\n  return (\r\n    <div className=\"bp-wrap\">\r\n      <h1 className=\"bp-title\">{title}</h1>\r\n\r\n      {loading && <div className=\"bp-empty\">Chargement…</div>}\r\n      {error && <div className=\"bp-error\">Erreur : {error}</div>}\r\n\r\n      {!loading && !error && (\r\n        products.length ? (\r\n          <div className=\"hp-grid\">\r\n            {products.map((p) => <HomeProductCard key={p.id} product={p} />)}\r\n          </div>\r\n        ) : (\r\n          <div className=\"bp-empty\">Aucun produit pour cette marque.</div>\r\n        )\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,kBAAkB;AAC5C,SAASC,QAAQ,QAAQ,eAAe;AACxC,OAAOC,eAAe,MAAM,+BAA+B;AAC3D,OAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,eAAe,SAASC,mBAAmBA,CAAA,EAAG;EAAAC,EAAA;EAC5C,MAAM;IAAEC;EAAK,CAAC,GAAGP,SAAS,CAAC,CAAC;EAC5B,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACY,MAAM,EAAEC,SAAS,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAKjB,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACkB,KAAK,EAAEC,QAAQ,CAAC,GAASnB,QAAQ,CAAC,EAAE,CAAC;;EAE5C;EACAF,SAAS,CAAC,MAAM;IACd,IAAIsB,EAAE,GAAG,IAAI;IACb,CAAC,YAAY;MACX,IAAI;QACF,MAAM;UAAEC;QAAK,CAAC,GAAG,MAAMpB,KAAK,CAACqB,GAAG,CAAC,cAAc,CAAC;QAChD,IAAI,CAACF,EAAE,EAAE;QACT,MAAMG,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE;QAC5CR,SAAS,CAACU,IAAI,CAAC;QACfZ,QAAQ,CAACR,QAAQ,CAACM,IAAI,EAAEc,IAAI,CAAC,CAAC;MAChC,CAAC,SAAS;QAAE,IAAIH,EAAE,EAAEH,UAAU,CAAC,KAAK,CAAC;MAAE;IACzC,CAAC,EAAE,CAAC;IACJ,OAAO,MAAM;MAAEG,EAAE,GAAG,KAAK;IAAE,CAAC;EAC9B,CAAC,EAAE,CAACX,IAAI,CAAC,CAAC;;EAEV;EACAX,SAAS,CAAC,MAAM;IACd,IAAI,CAACY,KAAK,EAAE;IACZ,IAAIU,EAAE,GAAG,IAAI;IACbH,UAAU,CAAC,IAAI,CAAC;IAChB,CAAC,YAAY;MACX,IAAI;QACF,MAAM;UAAEI;QAAK,CAAC,GAAG,MAAMpB,KAAK,CAACqB,GAAG,CAAC,wBAAwBI,kBAAkB,CAAChB,KAAK,CAAC,EAAE,CAAC;QACrF,IAAIU,EAAE,EAAEL,WAAW,CAACS,KAAK,CAACC,OAAO,CAACJ,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE,CAAC;MACtD,CAAC,CAAC,OAAOM,CAAC,EAAE;QAAA,IAAAC,WAAA,EAAAC,gBAAA;QACV,IAAIT,EAAE,EAAED,QAAQ,CAAC,CAAAQ,CAAC,aAADA,CAAC,wBAAAC,WAAA,GAADD,CAAC,CAAEG,QAAQ,cAAAF,WAAA,wBAAAC,gBAAA,GAAXD,WAAA,CAAaP,IAAI,cAAAQ,gBAAA,uBAAjBA,gBAAA,CAAmBE,MAAM,KAAIJ,CAAC,CAACK,OAAO,CAAC;MAC1D,CAAC,SAAS;QAAE,IAAIZ,EAAE,EAAEH,UAAU,CAAC,KAAK,CAAC;MAAE;IACzC,CAAC,EAAE,CAAC;IACJ,OAAO,MAAM;MAAEG,EAAE,GAAG,KAAK;IAAE,CAAC;EAC9B,CAAC,EAAE,CAACV,KAAK,CAAC,CAAC;EAEX,MAAMuB,KAAK,GAAGlC,OAAO,CAAC,MAAMW,KAAK,IAAI,QAAQ,EAAE,CAACA,KAAK,CAAC,CAAC;EAEvD,oBACEJ,OAAA;IAAK4B,SAAS,EAAC,SAAS;IAAAC,QAAA,gBACtB7B,OAAA;MAAI4B,SAAS,EAAC,UAAU;MAAAC,QAAA,EAAEF;IAAK;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EAEpCvB,OAAO,iBAAIV,OAAA;MAAK4B,SAAS,EAAC,UAAU;MAAAC,QAAA,EAAC;IAAW;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EACtDrB,KAAK,iBAAIZ,OAAA;MAAK4B,SAAS,EAAC,UAAU;MAAAC,QAAA,GAAC,WAAS,EAACjB,KAAK;IAAA;MAAAkB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAEzD,CAACvB,OAAO,IAAI,CAACE,KAAK,KACjBJ,QAAQ,CAAC0B,MAAM,gBACblC,OAAA;MAAK4B,SAAS,EAAC,SAAS;MAAAC,QAAA,EACrBrB,QAAQ,CAAC2B,GAAG,CAAEC,CAAC,iBAAKpC,OAAA,CAACF,eAAe;QAAYuC,OAAO,EAAED;MAAE,GAAjBA,CAAC,CAACE,EAAE;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAe,CAAC;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7D,CAAC,gBAENjC,OAAA;MAAK4B,SAAS,EAAC,UAAU;MAAAC,QAAA,EAAC;IAAgC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAChE,CACF;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC/B,EAAA,CA3DuBD,mBAAmB;EAAA,QACxBL,SAAS;AAAA;AAAA2C,EAAA,GADJtC,mBAAmB;AAAA,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}