{"ast":null,"code":"// src/actions/wishlistActions.js\nimport axios from \"axios\";\nexport const WISHLIST_LIST_REQUEST = \"WISHLIST_LIST_REQUEST\";\nexport const WISHLIST_LIST_SUCCESS = \"WISHLIST_LIST_SUCCESS\";\nexport const WISHLIST_LIST_FAIL = \"WISHLIST_LIST_FAIL\";\nexport const WISHLIST_TOGGLE_REQUEST = \"WISHLIST_TOGGLE_REQUEST\";\nexport const WISHLIST_TOGGLE_SUCCESS = \"WISHLIST_TOGGLE_SUCCESS\";\nexport const WISHLIST_TOGGLE_FAIL = \"WISHLIST_TOGGLE_FAIL\";\nconst authConfig = getState => {\n  const {\n    userLoginReducer: {\n      userInfo\n    } = {}\n  } = getState();\n  const token = (userInfo === null || userInfo === void 0 ? void 0 : userInfo.token) || (userInfo === null || userInfo === void 0 ? void 0 : userInfo.access);\n  return {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...(token ? {\n        Authorization: `Bearer ${token}`\n      } : {})\n    }\n  };\n};\nexport const fetchWishlist = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: WISHLIST_LIST_REQUEST\n    });\n    const {\n      data\n    } = await axios.get(\"/api/wishlist/\", authConfig(getState));\n    dispatch({\n      type: WISHLIST_LIST_SUCCESS,\n      payload: data\n    });\n  } catch (err) {\n    var _err$response, _err$response$data;\n    dispatch({\n      type: WISHLIST_LIST_FAIL,\n      payload: ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || err.message\n    });\n  }\n};\nexport const toggleWishlist = productId => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: WISHLIST_TOGGLE_REQUEST,\n      payload: productId\n    });\n    await axios.post(\"/api/wishlist/toggle/\", {\n      product_id: productId\n    }, authConfig(getState));\n    const {\n      data\n    } = await axios.get(\"/api/wishlist/\", authConfig(getState));\n    dispatch({\n      type: WISHLIST_LIST_SUCCESS,\n      payload: data\n    });\n    dispatch({\n      type: WISHLIST_TOGGLE_SUCCESS,\n      payload: productId\n    });\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    dispatch({\n      type: WISHLIST_TOGGLE_FAIL,\n      payload: ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || err.message\n    });\n  }\n};","map":{"version":3,"names":["axios","WISHLIST_LIST_REQUEST","WISHLIST_LIST_SUCCESS","WISHLIST_LIST_FAIL","WISHLIST_TOGGLE_REQUEST","WISHLIST_TOGGLE_SUCCESS","WISHLIST_TOGGLE_FAIL","authConfig","getState","userLoginReducer","userInfo","token","access","headers","Authorization","fetchWishlist","dispatch","type","data","get","payload","err","_err$response","_err$response$data","response","detail","message","toggleWishlist","productId","post","product_id","_err$response2","_err$response2$data"],"sources":["C:/Users/OUSSAMA CHAROUK/Downloads/FullStack_Ecommerce_App-main/frontend/src/actions/wishlistActions.js"],"sourcesContent":["// src/actions/wishlistActions.js\r\nimport axios from \"axios\";\r\n\r\nexport const WISHLIST_LIST_REQUEST  = \"WISHLIST_LIST_REQUEST\";\r\nexport const WISHLIST_LIST_SUCCESS  = \"WISHLIST_LIST_SUCCESS\";\r\nexport const WISHLIST_LIST_FAIL     = \"WISHLIST_LIST_FAIL\";\r\n\r\nexport const WISHLIST_TOGGLE_REQUEST = \"WISHLIST_TOGGLE_REQUEST\";\r\nexport const WISHLIST_TOGGLE_SUCCESS = \"WISHLIST_TOGGLE_SUCCESS\";\r\nexport const WISHLIST_TOGGLE_FAIL    = \"WISHLIST_TOGGLE_FAIL\";\r\n\r\nconst authConfig = (getState) => {\r\n  const { userLoginReducer: { userInfo } = {} } = getState();\r\n  const token = userInfo?.token || userInfo?.access;\r\n  return {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    },\r\n  };\r\n};\r\n\r\nexport const fetchWishlist = () => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: WISHLIST_LIST_REQUEST });\r\n    const { data } = await axios.get(\"/api/wishlist/\", authConfig(getState));\r\n    dispatch({ type: WISHLIST_LIST_SUCCESS, payload: data });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: WISHLIST_LIST_FAIL,\r\n      payload: err.response?.data?.detail || err.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const toggleWishlist = (productId) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: WISHLIST_TOGGLE_REQUEST, payload: productId });\r\n    await axios.post(\r\n      \"/api/wishlist/toggle/\",\r\n      { product_id: productId },\r\n      authConfig(getState)\r\n    );\r\n    const { data } = await axios.get(\"/api/wishlist/\", authConfig(getState));\r\n    dispatch({ type: WISHLIST_LIST_SUCCESS, payload: data });\r\n    dispatch({ type: WISHLIST_TOGGLE_SUCCESS, payload: productId });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: WISHLIST_TOGGLE_FAIL,\r\n      payload: err.response?.data?.detail || err.message,\r\n    });\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,qBAAqB,GAAI,uBAAuB;AAC7D,OAAO,MAAMC,qBAAqB,GAAI,uBAAuB;AAC7D,OAAO,MAAMC,kBAAkB,GAAO,oBAAoB;AAE1D,OAAO,MAAMC,uBAAuB,GAAG,yBAAyB;AAChE,OAAO,MAAMC,uBAAuB,GAAG,yBAAyB;AAChE,OAAO,MAAMC,oBAAoB,GAAM,sBAAsB;AAE7D,MAAMC,UAAU,GAAIC,QAAQ,IAAK;EAC/B,MAAM;IAAEC,gBAAgB,EAAE;MAAEC;IAAS,CAAC,GAAG,CAAC;EAAE,CAAC,GAAGF,QAAQ,CAAC,CAAC;EAC1D,MAAMG,KAAK,GAAG,CAAAD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEC,KAAK,MAAID,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,MAAM;EACjD,OAAO;IACLC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,IAAIF,KAAK,GAAG;QAAEG,aAAa,EAAE,UAAUH,KAAK;MAAG,CAAC,GAAG,CAAC,CAAC;IACvD;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMI,aAAa,GAAGA,CAAA,KAAM,OAAOC,QAAQ,EAAER,QAAQ,KAAK;EAC/D,IAAI;IACFQ,QAAQ,CAAC;MAAEC,IAAI,EAAEhB;IAAsB,CAAC,CAAC;IACzC,MAAM;MAAEiB;IAAK,CAAC,GAAG,MAAMlB,KAAK,CAACmB,GAAG,CAAC,gBAAgB,EAAEZ,UAAU,CAACC,QAAQ,CAAC,CAAC;IACxEQ,QAAQ,CAAC;MAAEC,IAAI,EAAEf,qBAAqB;MAAEkB,OAAO,EAAEF;IAAK,CAAC,CAAC;EAC1D,CAAC,CAAC,OAAOG,GAAG,EAAE;IAAA,IAAAC,aAAA,EAAAC,kBAAA;IACZP,QAAQ,CAAC;MACPC,IAAI,EAAEd,kBAAkB;MACxBiB,OAAO,EAAE,EAAAE,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcJ,IAAI,cAAAK,kBAAA,uBAAlBA,kBAAA,CAAoBE,MAAM,KAAIJ,GAAG,CAACK;IAC7C,CAAC,CAAC;EACJ;AACF,CAAC;AAED,OAAO,MAAMC,cAAc,GAAIC,SAAS,IAAK,OAAOZ,QAAQ,EAAER,QAAQ,KAAK;EACzE,IAAI;IACFQ,QAAQ,CAAC;MAAEC,IAAI,EAAEb,uBAAuB;MAAEgB,OAAO,EAAEQ;IAAU,CAAC,CAAC;IAC/D,MAAM5B,KAAK,CAAC6B,IAAI,CACd,uBAAuB,EACvB;MAAEC,UAAU,EAAEF;IAAU,CAAC,EACzBrB,UAAU,CAACC,QAAQ,CACrB,CAAC;IACD,MAAM;MAAEU;IAAK,CAAC,GAAG,MAAMlB,KAAK,CAACmB,GAAG,CAAC,gBAAgB,EAAEZ,UAAU,CAACC,QAAQ,CAAC,CAAC;IACxEQ,QAAQ,CAAC;MAAEC,IAAI,EAAEf,qBAAqB;MAAEkB,OAAO,EAAEF;IAAK,CAAC,CAAC;IACxDF,QAAQ,CAAC;MAAEC,IAAI,EAAEZ,uBAAuB;MAAEe,OAAO,EAAEQ;IAAU,CAAC,CAAC;EACjE,CAAC,CAAC,OAAOP,GAAG,EAAE;IAAA,IAAAU,cAAA,EAAAC,mBAAA;IACZhB,QAAQ,CAAC;MACPC,IAAI,EAAEX,oBAAoB;MAC1Bc,OAAO,EAAE,EAAAW,cAAA,GAAAV,GAAG,CAACG,QAAQ,cAAAO,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcb,IAAI,cAAAc,mBAAA,uBAAlBA,mBAAA,CAAoBP,MAAM,KAAIJ,GAAG,CAACK;IAC7C,CAAC,CAAC;EACJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}