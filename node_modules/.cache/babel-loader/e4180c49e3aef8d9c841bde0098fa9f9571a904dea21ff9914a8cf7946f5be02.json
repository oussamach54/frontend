{"ast":null,"code":"// src/actions/wishlistActions.js\nimport axios from 'axios';\nexport const WISHLIST_LIST_REQUEST = 'WISHLIST_LIST_REQUEST';\nexport const WISHLIST_LIST_SUCCESS = 'WISHLIST_LIST_SUCCESS';\nexport const WISHLIST_LIST_FAIL = 'WISHLIST_LIST_FAIL';\nexport const WISHLIST_TOGGLE_REQUEST = 'WISHLIST_TOGGLE_REQUEST';\nexport const WISHLIST_TOGGLE_SUCCESS = 'WISHLIST_TOGGLE_SUCCESS';\nexport const WISHLIST_TOGGLE_FAIL = 'WISHLIST_TOGGLE_FAIL';\nconst authConfig = getState => {\n  var _userLoginReducer$use;\n  const {\n    userLoginReducer\n  } = getState();\n  const token = userLoginReducer === null || userLoginReducer === void 0 ? void 0 : (_userLoginReducer$use = userLoginReducer.userInfo) === null || _userLoginReducer$use === void 0 ? void 0 : _userLoginReducer$use.token;\n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  if (token) headers['Authorization'] = `Bearer ${token}`;\n  return {\n    headers\n  };\n};\nexport const fetchWishlist = () => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: WISHLIST_LIST_REQUEST\n    });\n    const {\n      data\n    } = await axios.get('/api/wishlist/', authConfig(getState));\n    // { items: [products...] }\n    dispatch({\n      type: WISHLIST_LIST_SUCCESS,\n      payload: data.items || []\n    });\n  } catch (err) {\n    var _err$response, _err$response$data;\n    dispatch({\n      type: WISHLIST_LIST_FAIL,\n      payload: (err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || err.message\n    });\n  }\n};\nexport const toggleWishlist = productId => async (dispatch, getState) => {\n  try {\n    dispatch({\n      type: WISHLIST_TOGGLE_REQUEST,\n      payload: productId\n    });\n    const {\n      data\n    } = await axios.post('/api/wishlist/toggle/', {\n      product_id: productId\n    }, authConfig(getState));\n    // data = { product_id, in_wishlist }\n    dispatch({\n      type: WISHLIST_TOGGLE_SUCCESS,\n      payload: data\n    });\n    // refresh list after toggle\n    dispatch(fetchWishlist());\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    dispatch({\n      type: WISHLIST_TOGGLE_FAIL,\n      payload: (err === null || err === void 0 ? void 0 : (_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.detail) || err.message\n    });\n  }\n};","map":{"version":3,"names":["axios","WISHLIST_LIST_REQUEST","WISHLIST_LIST_SUCCESS","WISHLIST_LIST_FAIL","WISHLIST_TOGGLE_REQUEST","WISHLIST_TOGGLE_SUCCESS","WISHLIST_TOGGLE_FAIL","authConfig","getState","_userLoginReducer$use","userLoginReducer","token","userInfo","headers","fetchWishlist","dispatch","type","data","get","payload","items","err","_err$response","_err$response$data","response","detail","message","toggleWishlist","productId","post","product_id","_err$response2","_err$response2$data"],"sources":["C:/Users/OUSSAMA CHAROUK/Downloads/FullStack_Ecommerce_App-main/frontend/src/actions/wishlistActions.js"],"sourcesContent":["// src/actions/wishlistActions.js\r\nimport axios from 'axios';\r\n\r\nexport const WISHLIST_LIST_REQUEST  = 'WISHLIST_LIST_REQUEST';\r\nexport const WISHLIST_LIST_SUCCESS  = 'WISHLIST_LIST_SUCCESS';\r\nexport const WISHLIST_LIST_FAIL     = 'WISHLIST_LIST_FAIL';\r\n\r\nexport const WISHLIST_TOGGLE_REQUEST = 'WISHLIST_TOGGLE_REQUEST';\r\nexport const WISHLIST_TOGGLE_SUCCESS = 'WISHLIST_TOGGLE_SUCCESS';\r\nexport const WISHLIST_TOGGLE_FAIL    = 'WISHLIST_TOGGLE_FAIL';\r\n\r\nconst authConfig = (getState) => {\r\n  const { userLoginReducer } = getState();\r\n  const token = userLoginReducer?.userInfo?.token;\r\n\r\n  const headers = { 'Content-Type': 'application/json' };\r\n  if (token) headers['Authorization'] = `Bearer ${token}`;\r\n\r\n  return { headers };\r\n};\r\n\r\nexport const fetchWishlist = () => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: WISHLIST_LIST_REQUEST });\r\n    const { data } = await axios.get('/api/wishlist/', authConfig(getState));\r\n    // { items: [products...] }\r\n    dispatch({ type: WISHLIST_LIST_SUCCESS, payload: data.items || [] });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: WISHLIST_LIST_FAIL,\r\n      payload: err?.response?.data?.detail || err.message,\r\n    });\r\n  }\r\n};\r\n\r\nexport const toggleWishlist = (productId) => async (dispatch, getState) => {\r\n  try {\r\n    dispatch({ type: WISHLIST_TOGGLE_REQUEST, payload: productId });\r\n    const { data } = await axios.post(\r\n      '/api/wishlist/toggle/',\r\n      { product_id: productId },\r\n      authConfig(getState)\r\n    );\r\n    // data = { product_id, in_wishlist }\r\n    dispatch({ type: WISHLIST_TOGGLE_SUCCESS, payload: data });\r\n    // refresh list after toggle\r\n    dispatch(fetchWishlist());\r\n  } catch (err) {\r\n    dispatch({\r\n      type: WISHLIST_TOGGLE_FAIL,\r\n      payload: err?.response?.data?.detail || err.message,\r\n    });\r\n  }\r\n};\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,qBAAqB,GAAI,uBAAuB;AAC7D,OAAO,MAAMC,qBAAqB,GAAI,uBAAuB;AAC7D,OAAO,MAAMC,kBAAkB,GAAO,oBAAoB;AAE1D,OAAO,MAAMC,uBAAuB,GAAG,yBAAyB;AAChE,OAAO,MAAMC,uBAAuB,GAAG,yBAAyB;AAChE,OAAO,MAAMC,oBAAoB,GAAM,sBAAsB;AAE7D,MAAMC,UAAU,GAAIC,QAAQ,IAAK;EAAA,IAAAC,qBAAA;EAC/B,MAAM;IAAEC;EAAiB,CAAC,GAAGF,QAAQ,CAAC,CAAC;EACvC,MAAMG,KAAK,GAAGD,gBAAgB,aAAhBA,gBAAgB,wBAAAD,qBAAA,GAAhBC,gBAAgB,CAAEE,QAAQ,cAAAH,qBAAA,uBAA1BA,qBAAA,CAA4BE,KAAK;EAE/C,MAAME,OAAO,GAAG;IAAE,cAAc,EAAE;EAAmB,CAAC;EACtD,IAAIF,KAAK,EAAEE,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUF,KAAK,EAAE;EAEvD,OAAO;IAAEE;EAAQ,CAAC;AACpB,CAAC;AAED,OAAO,MAAMC,aAAa,GAAGA,CAAA,KAAM,OAAOC,QAAQ,EAAEP,QAAQ,KAAK;EAC/D,IAAI;IACFO,QAAQ,CAAC;MAAEC,IAAI,EAAEf;IAAsB,CAAC,CAAC;IACzC,MAAM;MAAEgB;IAAK,CAAC,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,gBAAgB,EAAEX,UAAU,CAACC,QAAQ,CAAC,CAAC;IACxE;IACAO,QAAQ,CAAC;MAAEC,IAAI,EAAEd,qBAAqB;MAAEiB,OAAO,EAAEF,IAAI,CAACG,KAAK,IAAI;IAAG,CAAC,CAAC;EACtE,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAC,aAAA,EAAAC,kBAAA;IACZR,QAAQ,CAAC;MACPC,IAAI,EAAEb,kBAAkB;MACxBgB,OAAO,EAAE,CAAAE,GAAG,aAAHA,GAAG,wBAAAC,aAAA,GAAHD,GAAG,CAAEG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAbD,aAAA,CAAeL,IAAI,cAAAM,kBAAA,uBAAnBA,kBAAA,CAAqBE,MAAM,KAAIJ,GAAG,CAACK;IAC9C,CAAC,CAAC;EACJ;AACF,CAAC;AAED,OAAO,MAAMC,cAAc,GAAIC,SAAS,IAAK,OAAOb,QAAQ,EAAEP,QAAQ,KAAK;EACzE,IAAI;IACFO,QAAQ,CAAC;MAAEC,IAAI,EAAEZ,uBAAuB;MAAEe,OAAO,EAAES;IAAU,CAAC,CAAC;IAC/D,MAAM;MAAEX;IAAK,CAAC,GAAG,MAAMjB,KAAK,CAAC6B,IAAI,CAC/B,uBAAuB,EACvB;MAAEC,UAAU,EAAEF;IAAU,CAAC,EACzBrB,UAAU,CAACC,QAAQ,CACrB,CAAC;IACD;IACAO,QAAQ,CAAC;MAAEC,IAAI,EAAEX,uBAAuB;MAAEc,OAAO,EAAEF;IAAK,CAAC,CAAC;IAC1D;IACAF,QAAQ,CAACD,aAAa,CAAC,CAAC,CAAC;EAC3B,CAAC,CAAC,OAAOO,GAAG,EAAE;IAAA,IAAAU,cAAA,EAAAC,mBAAA;IACZjB,QAAQ,CAAC;MACPC,IAAI,EAAEV,oBAAoB;MAC1Ba,OAAO,EAAE,CAAAE,GAAG,aAAHA,GAAG,wBAAAU,cAAA,GAAHV,GAAG,CAAEG,QAAQ,cAAAO,cAAA,wBAAAC,mBAAA,GAAbD,cAAA,CAAed,IAAI,cAAAe,mBAAA,uBAAnBA,mBAAA,CAAqBP,MAAM,KAAIJ,GAAG,CAACK;IAC9C,CAAC,CAAC;EACJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}