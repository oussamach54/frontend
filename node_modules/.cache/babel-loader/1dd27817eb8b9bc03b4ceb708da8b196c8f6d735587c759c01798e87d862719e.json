{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\OUSSAMA CHAROUK\\\\Downloads\\\\FullStack_Ecommerce_App-main\\\\frontend\\\\src\\\\components\\\\PaymentStatus.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Container, Alert, Spinner } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PaymentStatus() {\n  _s();\n  const [s, setS] = useState(\"checking\");\n  const urlParams = new URLSearchParams(window.location.search);\n  const orderId = urlParams.get(\"order\") || localStorage.getItem(\"lastOrderId\") || \"\";\n  useEffect(() => {\n    let ok = true;\n    if (!orderId) {\n      setS(\"unknown\");\n      return;\n    }\n    (async () => {\n      // On poll 6 fois toutes les 1.5s maximum\n      for (let i = 0; i < 6; i++) {\n        try {\n          const {\n            data\n          } = await axios.get(`/api/payments/order/${orderId}/status/`);\n          if (!ok) return;\n          if ([\"paid\", \"failed\", \"canceled\"].includes(data.status)) {\n            setS(data.status);\n            return;\n          }\n        } catch {\n          // on ignore et on réessaie\n        }\n        await new Promise(r => setTimeout(r, 1500));\n      }\n      setS(\"pending\");\n    })();\n    return () => {\n      ok = false;\n    };\n  }, [orderId]);\n  const render = () => {\n    if (s === \"paid\") return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"success\",\n      children: \"Paiement confirm\\xE9 \\u2705\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 30\n    }, this);\n    if (s === \"failed\") return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: \"Paiement refus\\xE9 \\u274C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 32\n    }, this);\n    if (s === \"canceled\") return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"warning\",\n      children: \"Paiement annul\\xE9 \\u26A0\\uFE0F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 34\n    }, this);\n    if (s === \"pending\") return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"info\",\n      children: \"En attente de confirmation\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 33\n    }, this);\n    if (s === \"unknown\") return /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"secondary\",\n      children: \"Commande introuvable\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 33\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        size: \"sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), \" V\\xE9rification du paiement\\u2026\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"h4 mb-3\",\n      children: \"Statut du paiement\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), render()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(PaymentStatus, \"wPVBu2zrfxs5J3+QhACdZmx6F94=\");\n_c = PaymentStatus;\nvar _c;\n$RefreshReg$(_c, \"PaymentStatus\");","map":{"version":3,"names":["useEffect","useState","axios","Container","Alert","Spinner","jsxDEV","_jsxDEV","PaymentStatus","_s","s","setS","urlParams","URLSearchParams","window","location","search","orderId","get","localStorage","getItem","ok","i","data","includes","status","Promise","r","setTimeout","render","variant","children","fileName","_jsxFileName","lineNumber","columnNumber","className","animation","size","_c","$RefreshReg$"],"sources":["C:/Users/OUSSAMA CHAROUK/Downloads/FullStack_Ecommerce_App-main/frontend/src/components/PaymentStatus.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Container, Alert, Spinner } from \"react-bootstrap\";\n\nexport default function PaymentStatus() {\n  const [s, setS] = useState(\"checking\");\n  const urlParams = new URLSearchParams(window.location.search);\n  const orderId =\n    urlParams.get(\"order\") || localStorage.getItem(\"lastOrderId\") || \"\";\n\n  useEffect(() => {\n    let ok = true;\n    if (!orderId) {\n      setS(\"unknown\");\n      return;\n    }\n    (async () => {\n      // On poll 6 fois toutes les 1.5s maximum\n      for (let i = 0; i < 6; i++) {\n        try {\n          const { data } = await axios.get(`/api/payments/order/${orderId}/status/`);\n          if (!ok) return;\n          if ([\"paid\", \"failed\", \"canceled\"].includes(data.status)) {\n            setS(data.status);\n            return;\n          }\n        } catch {\n          // on ignore et on réessaie\n        }\n        await new Promise((r) => setTimeout(r, 1500));\n      }\n      setS(\"pending\");\n    })();\n    return () => {\n      ok = false;\n    };\n  }, [orderId]);\n\n  const render = () => {\n    if (s === \"paid\") return <Alert variant=\"success\">Paiement confirmé ✅</Alert>;\n    if (s === \"failed\") return <Alert variant=\"danger\">Paiement refusé ❌</Alert>;\n    if (s === \"canceled\") return <Alert variant=\"warning\">Paiement annulé ⚠️</Alert>;\n    if (s === \"pending\") return <Alert variant=\"info\">En attente de confirmation…</Alert>;\n    if (s === \"unknown\") return <Alert variant=\"secondary\">Commande introuvable</Alert>;\n    return (\n      <div className=\"d-flex align-items-center gap-2\">\n        <Spinner animation=\"border\" size=\"sm\" /> Vérification du paiement…\n      </div>\n    );\n  };\n\n  return (\n    <Container className=\"py-4\">\n      <h1 className=\"h4 mb-3\">Statut du paiement</h1>\n      {render()}\n    </Container>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}